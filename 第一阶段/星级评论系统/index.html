<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <div id="star">
            <span>点击星星就能打分</span>
            <ul>
                <li><a href="javascript:;">1</a></li>
                <li><a href="javascript:;">2</a></li>
                <li><a href="javascript:;">3</a></li>
                <li><a href="javascript:;">4</a></li>
                <li><a href="javascript:;">5</a></li>
            </ul>
            <span class="scoreRight"></span>
            <div class="score">
            </div>
        </div>
        <script type="text/javascript">
            var star = document.getElementById('star');
            var ul = document.getElementsByTagName('ul')[0];
            var li = ul.getElementsByTagName('li');
            var scoreRight = document.getElementsByClassName('scoreRight')[0];
            var score = document.getElementsByClassName('score')[0];
            var i=iScore=iStar=0;
            var msg = [
                "很不满意|差得太离谱，与卖家描述的严重不符，非常不满",
                "不满意|部分有破损，与卖家描述的不符，不满意",
                "一般|质量一般，没有卖家描述的那么好",
                "满意|质量不错，与卖家描述的基本一致，还是挺满意的",
                "非常满意|质量非常好，与卖家描述的完全一致，非常满意"
            ];
            for(i = 0 ; i < li.length ; i++){
                li[i].index = i+1;
                li[i].onmouseover = function(){
                    fnPoint(this.index);
                    score.style.display = "block";
                    score.style.left = this.offsetLeft + 10 - 90 + "px";
                    console.log(this.index);
                    var str = "<span>"+this.index+" 分 "+msg[this.index-1].match(/(.+)\|/)[1]+"</span>";
                        str += "<p>" + msg[this.index-1].match(/\|(.+)/)[1] + "</p>"
                    score.innerHTML = str;
                }
                li[i].onmouseout = function(){
                    fnPoint(iStar);
                    score.style.display = "none";
                }
                li[i].onclick = function(){
                    console.log(1);
                    var str = "<strong>"+this.index+"分</strong>（"+msg[this.index-1].match(/\|(.+)/)[1]+"）";
                    scoreRight.innerHTML = str;
                    iStar = this.index;
                }
            }
            function fnPoint(iArg) {
                iScore = iArg || iStar;
                for(i = 0 ; i < li.length ; i++){
                    li[i].className = i<iScore ? "on" : "";
                }
            }
            function showScore(e,bool) {
                bool = bool ? true : false;
                if (bool) {
                    score.style.display = "block";
                    score.style.left = '1';
                }
            }
            showScore(1);
        </script>
    </body>
</html>
